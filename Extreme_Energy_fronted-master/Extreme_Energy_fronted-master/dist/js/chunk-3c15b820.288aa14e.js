(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c15b820"],{"31ca":function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));a("d3b7");var n=a("bc3a"),i=a.n(n),o="http://localhost:8080";function c(t,e){return new Promise((function(a,n){i.a.post(o+t,e).then((function(t){a(t)})).catch((function(t){n(t)}))}))}},"5cd0":function(t,e,a){"use strict";a("f1fa")},7499:function(t,e,a){},"8e21":function(t,e,a){"use strict";a("df0c")},ce87:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{height:"100%"}},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("div",{staticClass:"container left"},[a("actual-consumption",{ref:"actualConsume"}),a("tech-consumption",{ref:"techConsume"}),a("theory-consumption",{ref:"theoryConsume"})],1),a("div",{staticStyle:{width:"2000px",height:"900px"},attrs:{id:"chartContainer"}})])])])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"600px",padding:"5px 0"}},[a("p",{staticClass:"title"},[t._v("实际工序能耗: "+t._s(t.consume1)+" kgce/t-s"),a("button",{on:{click:function(e){return t.saveAndSubmit()}}},[t._v("计算")])]),a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("ul",t._l(t.consumptionItems,(function(e){return a("li",{key:e.index},[a("span",{staticClass:"ll",staticStyle:{width:"140px",display:"inline-block","line-height":"30px"}},[t._v(t._s(e.label)+" "+t._s(e.unit))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)]),a("div",{staticClass:"right"},[a("ul",t._l(t.coefficientItems,(function(e){return a("li",{key:e.index},[a("span",{staticClass:"rr",staticStyle:{width:"140px",display:"inline-block","line-height":"30px"}},[t._v(t._s(e.label)+"折算系数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)])])])},c=[],s=(a("4160"),a("b0c0"),a("a9e3"),a("b680"),a("ac1f"),a("466d"),a("159b"),a("d3e3")),r=a("31ca"),l=a("bc3a"),m=a.n(l),u={name:"actualConsumption",data:function(){return{consume1:0,consumptionItems:[{label:"焦粉消耗",unit:"kg",text:"",backendName:"cokeConsumption"},{label:"无烟煤消耗",unit:"Nm3",text:"",backendName:"coalConsumption"},{label:"BFG",unit:"Nm3",text:"",backendName:"bfgconsumption"},{label:"COG",unit:"Nm3",text:"",backendName:"cogconsumption"},{label:"电耗",unit:"Kwh",text:"",backendName:"electricityConsumption"},{label:"水耗",unit:"kg",text:"",backendName:"waterConsumption"},{label:"N2介质",unit:"kg",text:"",backendName:"n2Consumption"},{label:"回收蒸汽",unit:"kg",text:"",backendName:"steamConsumption"}],coefficientItems:[{label:"焦粉",text:"",backendName:"coke"},{label:"无烟煤",text:"",backendName:"coal"},{label:"BFG",text:"",backendName:"BFG"},{label:"COG",text:"",backendName:"COG"},{label:"电耗",text:"",backendName:"electricity"},{label:"水耗",text:"",backendName:"water"},{label:"N2",text:"",backendName:"N2"},{label:"回收蒸汽",text:"",backendName:"steam"}]}},methods:{saveAndSubmit:function(){this.saveToMaterialData(),this.submitData(),this.callSubmitToStore()},saveToMaterialData:function(){function t(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}var e=this.$store.state.materialData;console.log("in energy-efficiency actual, materialData",e),e.ratioConvert.coke=t(this.coefficientItems,"coke"),e.ratioConvert.coal=t(this.coefficientItems,"coal"),e.ratioConvert.BFG=t(this.coefficientItems,"BFG"),e.ratioConvert.COG=t(this.coefficientItems,"COG"),e.ratioConvert.electricity=t(this.coefficientItems,"electricity"),e.ratioConvert.water=t(this.coefficientItems,"water"),e.ratioConvert.N2=t(this.coefficientItems,"N2"),e.ratioConvert.steam=t(this.coefficientItems,"steam"),this.$store.commit("setMaterialData",e)},submitData:function(){var t=this;Object(r["a"])("/Actual/GetActualVo",this.$store.state.materialData).then((function(e){var a=e.data;function n(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}t.consumptionItems.forEach((function(t){t.text=a[t.backendName]})),console.log(t.consumptionItems),t.searchInBackendComputedReturnData(t.consumptionItems,a.data),t.consume1=n(t.coefficientItems,"coke")*e.data.data.cokeConsumption+n(t.coefficientItems,"coal")*e.data.data.coalConsumption+n(t.coefficientItems,"BFG")*e.data.data.bfgconsumption+n(t.coefficientItems,"COG")*e.data.data.cogconsumption+n(t.coefficientItems,"electricity")*e.data.data.electricityConsumption+n(t.coefficientItems,"water")*e.data.data.waterConsumption+n(t.coefficientItems,"N2")*e.data.data.n2Consumption+n(t.coefficientItems,"steam")*e.data.data.steamConsumption,t.consume1=t.consume1.toFixed(2)})).catch((function(t){console.error(t)}))},searchInBackendReturnData:function(t,e){for(var a=0;a<t.length;a++)for(var n=t[a],i=0;i<e.length;i++){var o=0;if(o=void 0!=n.backendName?e[i].name==n.backendName:e[i].annotation.match(n.label),o){n.text=e[i].ratio;break}}},searchInBackendComputedReturnData:function(t,e){for(var a=0;a<t.length;a++){var n=t[a];for(var i in e)if(Object.hasOwnProperty.call(e,i)){var o=0;if(o=i==n.backendName,o){n.text=e[i],n.text=n.text.toFixed(2);break}}}},callSubmitToStore:function(){s["a"].$emit("saveAndSubmit")}},created:function(){var t=this;m.a.post("/Actual/getConvertRatio").then((function(e){t.flag=e.data.flag,t.searchInBackendReturnData(t.coefficientItems,e.data)})).catch((function(t){console.error(t)}))}},f=u,d=(a("8e21"),a("2877")),h=Object(d["a"])(f,o,c,!1,null,"4e5fdd78",null),p=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"600px",padding:"5px 0"}},[a("p",{staticClass:"title"},[t._v("技术极致能耗 "+t._s(t.consume2)+" kgce/t-s")]),a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("ul",t._l(t.consumptionItems,(function(e){return a("li",{key:e.index},[a("span",{staticClass:"ll",staticStyle:{width:"140px",display:"inline-block","line-height":"30px"}},[t._v(" "+t._s(e.label)+" "+t._s(e.unit))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)]),a("div",{staticClass:"right"},[a("ul",t._l(t.coefficientItems,(function(e){return a("li",{key:e.index},[a("span",{staticStyle:{width:"180px",display:"inline-block","line-height":"30px"}},[t._v(t._s(e.label)+"折算系数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)])])])},v=[],x={name:"techConsumption",data:function(){return{consume2:0,consumptionItems:[{label:"焦粉消耗",unit:"kg",text:"",backendName:"cokeConsumption"},{label:"无烟煤消耗",unit:"Nm3",text:"",backendName:"coalConsumption"},{label:"BFG",unit:"Nm3",text:"",backendName:"bfgconsumption"},{label:"COG",unit:"Nm3",text:"",backendName:"cogconsumption"},{label:"电耗",unit:"Kwh",text:"",backendName:"electricityConsumption"},{label:"水耗",unit:"kg",text:"",backendName:"waterConsumption"},{label:"N2介质",unit:"kg",text:"",backendName:"n2Consumption"},{label:"回收蒸汽",unit:"kg",text:"",backendName:"steamConsumption"}],coefficientItems:[{label:"焦粉消耗",text:"",backendName:"coke"},{label:"无烟煤消耗",text:"",backendName:"coal"},{label:"BFG",text:"",backendName:"BFG"},{label:"COG",text:"",backendName:"COG"},{label:"电耗",text:"",backendName:"electricity"},{label:"水耗",text:"",backendName:"water"},{label:"N2",text:"",backendName:"N2"},{label:"回收蒸汽",text:"",backendName:"steam"}]}},methods:{saveAndSubmit:function(){this.saveToMaterialData(),this.submitData()},saveToMaterialData:function(){function t(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}var e=this.$store.state.materialData;console.log("in energy-efficiency tech, materialData",e),e.ratioConvert.coke=t(this.coefficientItems,"coke"),e.ratioConvert.coal=t(this.coefficientItems,"coal"),e.ratioConvert.BFG=t(this.coefficientItems,"BFG"),e.ratioConvert.COG=t(this.coefficientItems,"COG"),e.ratioConvert.electricity=t(this.coefficientItems,"electricity"),e.ratioConvert.water=t(this.coefficientItems,"water"),e.ratioConvert.N2=t(this.coefficientItems,"N2"),e.ratioConvert.steam=t(this.coefficientItems,"steam"),this.$store.commit("setMaterialData",e)},submitData:function(){var t=this,e=JSON.parse(JSON.stringify(this.$store.state.materialData));for(var a in e.param_)if(Object.hasOwnProperty.call(e.param_,a))for(var n in e.param)if(Object.hasOwnProperty.call(e.param,n)&&n==a){e.param[n]=e.param_[a];break}console.log("in energy-efficiency tech, PROCESSED materialData",e),Object(r["a"])("/Tech/GetPellet",e).then((function(e){var a=e.data;function n(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}t.consumptionItems.forEach((function(t){t.text=a[t.backendName]})),console.log(t.consumptionItems),t.searchInBackendComputedReturnData(t.consumptionItems,a.data.actualVo);var i=e.data.data.actualVo;t.consume2=n(t.coefficientItems,"coke")*i.cokeConsumption+n(t.coefficientItems,"coal")*i.coalConsumption+n(t.coefficientItems,"BFG")*i.bfgconsumption+n(t.coefficientItems,"COG")*i.cogconsumption+n(t.coefficientItems,"electricity")*i.electricityConsumption+n(t.coefficientItems,"water")*i.waterConsumption+n(t.coefficientItems,"N2")*i.n2Consumption+n(t.coefficientItems,"steam")*i.steamConsumption,t.consume2=t.consume2.toFixed(2)})).catch((function(t){console.error(t)}))},searchInBackendReturnData:function(t,e){for(var a=0;a<t.length;a++)for(var n=t[a],i=0;i<e.length;i++){var o=0;if(o=void 0!=n.backendName?e[i].name==n.backendName:e[i].annotation.match(n.label),o){n.text=e[i].ratio;break}}},searchInBackendComputedReturnData:function(t,e){for(var a=0;a<t.length;a++){var n=t[a];for(var i in e)if(Object.hasOwnProperty.call(e,i)){var o=0;if(o=i==n.backendName,o){n.text=e[i],n.text=n.text.toFixed(2);break}}}}},mounted:function(){var t=this;s["a"].$on("saveAndSubmit",(function(){t.saveAndSubmit()}))},created:function(){var t=this;m.a.post("/Actual/getConvertRatio").then((function(e){t.flag=e.data.flag,t.searchInBackendReturnData(t.coefficientItems,e.data)})).catch((function(t){console.error(t)}))},beforeDestroy:function(){s["a"].$off("submitToStore")}},k=x,C=(a("5cd0"),Object(d["a"])(k,b,v,!1,null,"5d203417",null)),N=C.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"600px",padding:"5px 0"}},[a("p",{staticClass:"title"},[t._v("理论极致能耗 "+t._s(t.consume3)+" kgce/t-s ")]),a("div",{staticClass:"container"},[a("div",{staticClass:"left"},[a("ul",t._l(t.consumptionItems,(function(e){return a("li",{key:e.index},[a("span",{staticClass:"ll",staticStyle:{width:"140px",display:"inline-block","line-height":"30px"}},[t._v(t._s(e.label)+" "+t._s(e.unit))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)]),a("div",{staticClass:"right"},[a("ul",t._l(t.coefficientItems,(function(e){return a("li",{key:e.index},[a("span",{staticClass:"rr",staticStyle:{width:"140px",display:"inline-block","line-height":"30px"}},[t._v(t._s(e.label)+"折算系数")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"item.text"}],staticClass:"narrow-input",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(a){a.target.composing||t.$set(e,"text",a.target.value)}}})])})),0)])])])},I=[],y={name:"theoryConsumption",data:function(){return{consume3:0,consumptionItems:[{label:"煤炭消耗",unit:"kg",text:"",backendName:"coalConsumption"},{label:"BFG",unit:"Nm3",backendName:"bfgconsumption"},{label:"COG",unit:"Nm3",backendName:"cogconsumption"},{label:"电耗",unit:"Kwh",backendName:"electricityConsumption"},{label:"水耗",unit:"kg",backendName:"waterConsumption"},{label:"N2介质",unit:"kg",backendName:"n2Consumption"},{label:"回收蒸汽",unit:"kg",backendName:"steamConsumption"}],coefficientItems:[{label:"煤炭消耗",text:"",backendName:"coke"},{label:"无烟煤",text:"",backendName:"coal"},{label:"BFG",text:"",backendName:"BFG"},{label:"COG",text:"",backendName:"COG"},{label:"电耗",text:"",backendName:"electricity"},{label:"水耗",text:"",backendName:"water"},{label:"N2",text:"",backendName:"N2"},{label:"回收蒸汽",text:"",backendName:"steam"}]}},methods:{saveAndSubmit:function(){this.saveToTheoryData(),this.submitData()},saveToTheoryData:function(){function t(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}var e=this.$store.state.theoryData;console.log(e),e.coke=t(this.coefficientItems,"coke"),e.coal=t(this.coefficientItems,"coal"),e.BFG=t(this.coefficientItems,"BFG"),e.COG=t(this.coefficientItems,"COG"),e.electricity=t(this.coefficientItems,"electricity"),e.water=t(this.coefficientItems,"water"),e.N2=t(this.coefficientItems,"N2"),e.steam=t(this.coefficientItems,"steam"),this.$store.commit("setTheoryData",e)},searchInBackendReturnData:function(t,e){for(var a=0;a<t.length;a++)for(var n=t[a],i=0;i<e.length;i++){var o=0;if(o=void 0!=n.backendName?e[i].name==n.backendName:e[i].annotation.match(n.label),o){n.text=e[i].ratio,n.text=n.text.toFixed(2);break}}},submitData:function(){var t=this;function e(t,e){for(var a=0;a<t.length;a++){var n=t[a];if(n.backendName==e)return Number(n.text)}}m.a.post("/Theory/GetResult",this.$store.state.theoryData).then((function(a){var n=a.data;t.consumptionItems[0].text=0,t.consumptionItems.forEach((function(t){t.text=n.data[t.backendName]})),console.log(t.consumptionItems),console.log(a.data),t.consume3=e(t.coefficientItems,"coke")*a.data.data.cokeConsumption+e(t.coefficientItems,"coal")*a.data.data.coalConsumption+e(t.coefficientItems,"BFG")*a.data.data.bfgconsumption+e(t.coefficientItems,"COG")*a.data.data.cogconsumption+e(t.coefficientItems,"electricity")*a.data.data.electricityConsumption+e(t.coefficientItems,"water")*a.data.data.waterConsumption+e(t.coefficientItems,"N2")*a.data.data.n2Consumption+e(t.coefficientItems,"steam")*a.data.data.steamConsumption,t.consume3=t.consume3.toFixed(2),console.log(t.consume3)})).catch((function(t){console.error(t)}))}},mounted:function(){var t=this;s["a"].$on("saveAndSubmit",(function(){t.saveAndSubmit()}))},created:function(){var t=this;m.a.post("/Actual/getConvertRatio").then((function(e){t.searchInBackendReturnData(t.coefficientItems,e.data)})).catch((function(t){console.error(t)}))},beforeDestroy:function(){s["a"].$off("submitToStore")}},w=y,G=(a("d16a7"),Object(d["a"])(w,g,I,!1,null,"2ed4f014",null)),_=G.exports,D=a("313e"),O={name:"EnergyView",components:{ActualConsumption:p,TechConsumption:N,TheoryConsumption:_},data(){return{consume1:0,consume2:0,consume3:0,chart:null}},created(){},mounted(){this.$nextTick(()=>{this.$watch(()=>this.$refs.actualConsume.consume1,t=>{this.consume1=t,this.updateChart()}),this.$watch(()=>this.$refs.techConsume.consume2,t=>{this.consume2=t,this.updateChart()}),this.$watch(()=>this.$refs.theoryConsume.consume3,t=>{this.consume3=t,this.updateChart()})});const t=document.getElementById("chartContainer");this.chart=D["init"](t),this.updateChart()},methods:{updateChart(){const t={textStyle:{color:"white"},legend:{orient:"horizontal",right:"center",top:"top",textStyle:{color:"white"}},title:{text:"工序能耗详细信息",textStyle:{color:"yellow"}},tooltip:{},xAxis:{data:["工序实际能耗","工序技术能耗","工序理论能耗"],axisLabel:{color:"yellow"}},yAxis:{min:0,max:3e4,axisLabel:{color:"white"}},series:[{data:[this.consume1,this.consume2,this.consume3],type:"bar",stack:"x",name:"Consumption"}]};console.log(this.consume1,this.consume2,this.consume3),this.chart.setOption(t)}}},S=O,$=Object(d["a"])(S,n,i,!1,null,null,null);e["default"]=$.exports},d16a7:function(t,e,a){"use strict";a("7499")},d3e3:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a("2b0e"),i=new n["default"]},df0c:function(t,e,a){},f1fa:function(t,e,a){}}]);
//# sourceMappingURL=chunk-3c15b820.288aa14e.js.map